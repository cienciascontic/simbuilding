<!DOCTYPE html>

<html>
    <head>
        <title>SimBuilding</title>
        <script type="text/javascript" src="resources/e2d/energy2d.js"></script>
        <script type="text/javascript" src="libs/three.js"></script>
        <script type="text/javascript" src="libs/jquery-1.9.0.js"></script>
        <script type="text/javascript" src="libs/stats.js"></script>
        <script type="text/javascript" src="libs/dat.gui.js"></script>
        <script type="text/javascript" src="libs/FirstPersonControls.js"></script>
        <script type="text/javascript" src="libs/OrbitControls.js"></script>
        <script type="text/javascript" src="libs/ColladaLoader.js"></script>
        <script type="text/javascript" src="libs/EffectComposer.js"></script>
        <script type="text/javascript" src="libs/RenderPass.js"></script>
        <script type="text/javascript" src="libs/ShaderPass.js"></script>
        <script type="text/javascript" src="libs/MaskPass.js"></script>
        <script type="text/javascript" src="libs/CopyShader.js"></script>
        <script type="text/javascript" src="libs/ColorifyShader.js"></script>
        <script type="text/javascript" src="simbuilding.js"></script>
        <script type="text/javascript" src="PointerLockControls.js"></script>

        <style>
            body{
                margin: 0;
                overflow: hidden;
            }
        </style>
    </head>
    <body>
        <script id="vertexShader" type="x-shader/x-vertex">
            precision mediump float;
            precision mediump int;

            uniform mat4 modelViewMatrix; // optional
            uniform mat4 projectionMatrix; // optional

            attribute vec3 position;
            attribute vec4 color;

            varying vec3 vPosition;
            varying vec4 vColor;

            void main()	{

            vPosition = position;
            vColor = color;

            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

            }
        </script>

        <script id="fragmentShader" type="x-shader/x-fragment">
            precision mediump float;
            precision mediump int;

            uniform float time;

            varying vec3 vPosition;
            varying vec4 vColor;

            void main()	{

            vec4 color = vec4( vColor );
            color.r = 0.1;
            color.b = 0.1;
            color.g = 0.99;

            gl_FragColor = color;

            }
        </script>

        <div id="Stats-output">
        </div>

        <div id="WebGL-output">
            <div id="applet" style="
                 position: absolute;
                 left: 50%;
                 bottom: 0;
                 text-align: center;
                 background-image: url('resources/textures/ir-camera.png');
                 width:624px;
                 height:712px;
                 margin-left: -312px;
                 margin-top: -361px;
                 display: none;
                 ">
                <div style="
                     position: absolute;
                     left: 50%;
                     bottom: 205px;
                     text-align: center;
                     width: 480px;
                     background-color: #ccc;
                     margin-left: -240px;
                     ">
                    <applet id="applet1" archive="resources/e2d/energy2d-applet.jar" code="org.concord.energy2d.system.System2D" width="480" height="360" style="display: none">
                        <param name="script" value="load resources/e2d/thermal-bridge.e2d;"/>
                        <param name="permissions" value="sandbox"/>
                        <param name="MAYSCRIPT" value="true"/>
                    </applet>
                    <br>
                    <div>
                        <form>
                            <input id="run_button" type="button" value="Run" onclick="run('applet1')">
                            <input id="stop_button" type="button" value="Stop" onclick="stop('applet1')">
                            <input id="reset_button" type="button" value="Reset" onclick="jsReset('applet1')">
                            <select onChange="runScript('applet1', 'set color_palette_type ' + this.options[this.selectedIndex].value)">
                                <option value="RAINBOW">Rainbow</option>
                                <option value="IRON" selected>Iron</option>
                                <option value="GRAY">Gray</option>
                            </select>
                        </form>
                    </div>
                </div>
            </div>
            <div id="ircamera" style="position: absolute; right: 0; bottom: 0; display: none">
                <img src="resources/textures/ircamera.png" width="300" height="400"/>
            </div>
        </div>

        <script type="text/javascript">
			$(function () {
				startSimBuilding();
			});
        </script>
    </body>
</html>